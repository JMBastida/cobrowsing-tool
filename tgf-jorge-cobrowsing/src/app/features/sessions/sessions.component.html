<div class="card">
  <p-table [value]="sessions()" [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th>Client Name</th>
        <th>Current Page</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-session>
      <tr>
        <td>{{ session.clientName || 'Anonymous' }}</td>
        <td>{{ session.locations?.[session.locations.length - 1] || 'N/A' }}</td>
        <td>
          @if(session.isCobrowsing) {
            <p-tag severity="success" value="Co-browsing"></p-tag>
          } @else if (session.isHelpRequest) {
            <p-tag severity="warn" value="Help Requested"></p-tag>
          } @else {
            <p-tag severity="info" value="Online"></p-tag>
          }
        </td>
        <td>
          <p-button label="Connect" icon="pi pi-link" (click)="connectToSession(session)"></p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="4">No active sessions.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
